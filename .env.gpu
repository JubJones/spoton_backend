# GPU-Optimized Environment Configuration for SpotOn Backend
# High-performance GPU setup with CUDA acceleration

# Docker build configuration
PYTORCH_VARIANT_BUILD=cu121

# Application settings
APP_NAME="SpotOn Backend (GPU)"
API_V1_PREFIX="/api/v1"
DEBUG=False

# S3 / DagsHub configuration
S3_ENDPOINT_URL="https://s3.dagshub.com"
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
S3_BUCKET_NAME="spoton_ml"
DAGSHUB_REPO_OWNER=Jwizzed
DAGSHUB_REPO_NAME=spoton_ml

# Local directories
LOCAL_VIDEO_DOWNLOAD_DIR=./downloaded_videos
LOCAL_FRAME_EXTRACTION_DIR=./extracted_frames

# Database configuration
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
POSTGRES_USER=spoton_user
POSTGRES_PASSWORD=spoton_password
POSTGRES_SERVER=timescaledb
POSTGRES_PORT=5432
POSTGRES_DB=spotondb

# AI model configuration (GPU-optimized)
DETECTOR_TYPE="fasterrcnn"
PERSON_CLASS_ID=1
DETECTION_CONFIDENCE_THRESHOLD=0.5
DETECTION_USE_AMP=True              # Enable Automatic Mixed Precision
TRACKER_TYPE="bytetrack"
TRACKER_HALF_PRECISION=True         # Enable half precision for GPU
TRACKER_PER_CLASS=False

# Model weights and ReID
WEIGHTS_DIR="./weights"
REID_WEIGHTS_PATH="clip_market1501.pt"
REID_MODEL_TYPE="clip"
REID_MODEL_HALF_PRECISION=True      # Enable half precision for GPU
REID_SIMILARITY_METHOD="faiss_l2"
REID_SIMILARITY_THRESHOLD=0.65

# Performance settings (GPU-optimized)
TARGET_FPS=15                       # High FPS for GPU
FRAME_JPEG_QUALITY=90               # High quality
BATCH_SIZE=4                        # Larger batch size for GPU

# GPU-specific settings
CUDA_VISIBLE_DEVICES=0
PYTORCH_CUDA_ALLOC_CONF=max_split_size_mb:512

# ReID performance tuning (GPU-optimized)
REID_GALLERY_EMA_ALPHA=0.9
REID_REFRESH_INTERVAL_FRAMES=10
REID_LOST_TRACK_BUFFER_FRAMES=200
REID_MAIN_GALLERY_PRUNE_INTERVAL_FRAMES=500
REID_MAIN_GALLERY_PRUNE_THRESHOLD_FRAMES=400
