# SpotOn Backend - Local Development Environment Configuration
# Copy this file to .env.local and customize for your local setup

# Docker build specific (not needed for local development)
PYTORCH_VARIANT_BUILD=cpu

# --- Application Settings ---
APP_NAME="SpotOn Backend (Local)"
API_V1_PREFIX="/api/v1"
DEBUG=true

# --- Production Endpoint Control ---
# Enable all endpoints for local development
ENABLE_ANALYTICS_ENDPOINTS=true
ENABLE_EXPORT_ENDPOINTS=true
ENABLE_AUTH_ENDPOINTS=true
ENABLE_ADMIN_ENDPOINTS=true
PRODUCTION_MODE=false

# --- Security Configuration ---
# Local development CORS settings
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173,http://127.0.0.1:3000,http://127.0.0.1:5173
ALLOWED_HOSTS=localhost,127.0.0.1,0.0.0.0
# More relaxed rate limiting for local development
RATE_LIMIT_PER_MINUTE=300
# Enable security features
ENABLE_SECURITY_HEADERS=true
ENABLE_REQUEST_LOGGING=true
# Maximum request size in MB
MAX_REQUEST_SIZE_MB=50

# --- S3 Configuration (Update with your credentials) ---
S3_ENDPOINT_URL="https://s3.dagshub.com"
AWS_ACCESS_KEY_ID=your_access_key_here
AWS_SECRET_ACCESS_KEY=your_secret_key_here
S3_BUCKET_NAME="spoton_ml"

# --- DagsHub Configuration ---
DAGSHUB_REPO_OWNER=Jwizzed
DAGSHUB_REPO_NAME=spoton_ml

# --- Local Data Directories ---
LOCAL_VIDEO_DOWNLOAD_DIR=./downloaded_videos
LOCAL_FRAME_EXTRACTION_DIR=./extracted_frames

# --- Local Redis Configuration ---
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0

# --- Local PostgreSQL Configuration ---
POSTGRES_USER=spoton_user
POSTGRES_PASSWORD=spoton_password
POSTGRES_SERVER=localhost
POSTGRES_PORT=5432
POSTGRES_DB=spotondb

# --- AI Model Configuration ---
# Detector Settings
DETECTOR_TYPE="fasterrcnn"
PERSON_CLASS_ID=1
DETECTION_CONFIDENCE_THRESHOLD=0.5
DETECTION_USE_AMP=False

# Tracker Settings
TRACKER_TYPE="botsort"

# Re-ID Settings
WEIGHTS_DIR="./weights"
REID_WEIGHTS_PATH="clip_market1501.pt"
TRACKER_HALF_PRECISION=False
TRACKER_PER_CLASS=False

# --- Local Development Settings ---
# Logging levels for development
LOG_LEVEL=DEBUG
UVICORN_LOG_LEVEL=info

# Frame processing settings (adjusted for local development)
TARGET_FPS=10
FRAME_JPEG_QUALITY=80
MAX_CONCURRENT_CAMERAS=4

# WebSocket settings
WEBSOCKET_PING_INTERVAL=30
WEBSOCKET_TIMEOUT=300

# File upload limits
MAX_UPLOAD_SIZE_MB=100

# --- Local Testing Configuration ---
# Test database (optional, separate from main database)
TEST_POSTGRES_DB=spotondb_test

# Enable development features
ENABLE_DEV_ENDPOINTS=true
ENABLE_DEBUG_TOOLBAR=true

# --- RT-DETR (Detection) Weights Overrides (optional for local) ---
# To point the backend at your local RT-DETR weights for campus/factory,
# set one of the following. If unset, it will attempt to find
# ./weights/<env>.pt or fall back to a default path if available.
#EXTERNAL_WEIGHTS_BASE_DIR="/Users/yourname/path/to/spoton_ml/weights"
#RTDETR_MODEL_PATH_CAMPUS="/Users/yourname/path/to/spoton_ml/weights/campus.pt"
#RTDETR_MODEL_PATH_FACTORY="/Users/yourname/path/to/spoton_ml/weights/factory.pt"
